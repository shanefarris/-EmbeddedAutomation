<style>input[type=text]{width:300px}</style><form action=/config_save method=post><input id=deviceType_hidden type=hidden value={0}> <input id=ssid_hidden type=hidden value={1}> <input id=phone_hidden type=hidden value={4}> <input id=maxCheck_hidden type=hidden value={5}> <input id=minCheck_hidden type=hidden value={6}> <input id=sendEmail_hidden type=hidden value={7}> <input id=sendSms_hidden type=hidden value={8}> <input id=maxRange_hidden type=hidden value={9}> <input id=minRange_hidden type=hidden value={10}> <input id=deviceName_hidden type=hidden value={11}> <input id=deviceInterval_hidden type=hidden value={12}> <input id=saveIntervalMinute_hidden type=hidden value={13}> <input id=catalogHost_hidden type=hidden value={17}> <input id=stateHost_hidden type=hidden value={19}> <input id=toEmail_hidden type=hidden value={3}> <input id=fromEmail_hidden type=hidden value={14}> <input id=emailHost_hidden type=hidden value={15}> <input id=emailPort_hidden type=hidden value={16}><fieldset><legend>Device Settings:</legend><table><tr><td>Device Type:<td><select id=ddlDeviceType name=ddlDeviceType onchange=onDeviceChange()><option value=temp>Temperature (Dry, DS18B20)<option value=temp_humidity>Temperature & Humidity (DHT11)<option value=water_level>Water Level<option value=water_flow>Water Flow<option value=flood>Flood Alert<option value=water_temp>Water Temperature (Waterproof)<option value=relay_single>Relay (Single)<option value=HCSR04>Water Level (Ultra Sonic HCSR04)<option value=motion>Motion</select><tr><td>Device Name:<td><input id=txtDeviceName><tr><td>Alert if Max Exceeded?<td><input id=chkNotifyMax type=checkbox><tr><td>Alert if Min Exceeded?<td><input id=chkNotifyMin type=checkbox><tr><td>Send Email?<td><input id=chkSendEmail type=checkbox><tr><td>Send SMS?<td><input id=chkSendSms type=checkbox><tr><td>Max Range:<td><input id=txtMaxRange style=width:50px><tr><td>Min Range:<td><input id=txtMinRange style=width:50px><tr><td>Sensor Reading Interval(ms):<td><input id=txtDeviceInterval style=width:50px><tr><td>Save to Log Interval(minutes):<td><input id=txtSaveIntervalMinute style=width:50px><tr><td>Device Register Host:<td><input id=txtCatalogHost><tr><td>Device State Host (Not Done):<td><input id=txtStateHost></table><p>Standard options for the sensor used on this device. Usually you don't want to change the "Sensor Reading Interval", keeping it at its default setting is adviced.</fieldset><fieldset><legend>Connection to local network (Optional):</legend><table><tr><td>SSID:<td><input id=txtSsid><tr><td>Client Password:<td><input id=txtPsk type=password><tr><td>AP Password:<td><input id=txtstandalonePassword type=password></table><p>This information is optional. Fill out the SSID (Wifi name) and the password if you want the device to connect to a master device. Leave these fields empty if you want this to be a stand alone device. This is optional.<p>If this is a stand alond device, then it would be a good idea to enter in information for email alerts, and/or SMS information as well.</fieldset><fieldset><legend>Email Settings (Optional):</legend><div id=divGenericEmail><table><tr><td>Email Host:<td><input id=txtEmailHost><tr><td>Host Port:<td><input id=txtEmailPort><tr><td>To Email (send notification to this address):<td><input id=txtToEmail><tr><td>From Email:<td><input id=txtFromEmail><tr><td>Password:<td><input id=txtEmailPassword type=password></table><p>The "From" email address and password are for most email services, this is optional.</div></fieldset><fieldset><legend>SMS Options (Optional):</legend><table><tr><td>Phone Number:<td><input id=txtSmsNumber></table><p>The phone number to send SMS messages, this is optional.</fieldset><br><br><input type=button value=Save onclick=submitForm()><br><br><input type=button value=Cancel onclick='location.href="/index"'></form><br><br><div><a href=/index>Home</a></div><script>function onDeviceChange(){var e=document.getElementById("ddlDeviceType"),t=e.value;if(e.value!=document.getElementById("deviceType_hidden").value){document.getElementById("txtSaveIntervalMinute").value="6000",document.getElementById("txtDeviceInterval").value="1000";var d=document.getElementById("txtMaxRange"),n=document.getElementById("txtMinRange"),m=document.getElementById("txtDeviceName"),l=document.getElementById("chkNotifyMax"),a=document.getElementById("chkNotifyMin"),u=document.getElementById("chkSendEmail"),c=document.getElementById("chkSendSms");l.value=!0,a.value=!0,"water_level"==t||"flood"==t?(d.value="1025",n.value="700",m.value="Flood",l.checked=!1,a.checked=!0):"water_temp"==t||"temp_humidity"==t||"temp"==t?(d.value="83",n.value="70",m.value="Water Temp",document.getElementById("txtDeviceInterval").value="10000"):"HCSR04"==t?(d.value="50",n.value="10",m.value="LevelSensor",u.checked=!1,c.checked=!1):"relay_single"!=t&&"motion"!=t||(l.value=!1,a.value=!1,d.value="0",n.value="0",m.value="Relay",u.checked=!1,c.checked=!1)}}function submitForm(){if(confirm("Save changes?")){var e="?ssid="+document.getElementById("txtSsid").value;if(e+="&psk="+document.getElementById("txtPsk").value,e+="&standalonePassword="+document.getElementById("txtstandalonePassword").value,e+="&phone="+document.getElementById("txtSmsNumber").value,e+="&catalogHost="+document.getElementById("txtCatalogHost").value,e+="&stateHost="+document.getElementById("txtStateHost").value,e+="&emailPort="+document.getElementById("txtEmailPort").value,e+="&emailHost="+document.getElementById("txtEmailHost").value,e+="&toEmail="+document.getElementById("txtToEmail").value,e+="&fromEmail="+document.getElementById("txtFromEmail").value,""!=document.getElementById("txtEmailPassword").value){var t=document.getElementById("txtEmailPassword").value;e+="&emailPassword="+window.btoa(t)}document.getElementById("chkNotifyMax").checked?e+="&maxCheck=1":e+="&maxCheck=0",document.getElementById("chkNotifyMin").checked?e+="&minCheck=1":e+="&minCheck=0",document.getElementById("chkSendEmail").checked?e+="&sendEmail=1":e+="&sendEmail=0",document.getElementById("chkSendSms").checked?e+="&sendSms=1":e+="&sendSms=0",e+="&maxRange="+document.getElementById("txtMaxRange").value,e+="&minRange="+document.getElementById("txtMinRange").value,e+="&deviceName="+document.getElementById("txtDeviceName").value,e+="&deviceInterval="+document.getElementById("txtDeviceInterval").value,e+="&saveIntervalMinute="+document.getElementById("txtSaveIntervalMinute").value,e+="&deviceType="+document.getElementById("ddlDeviceType").value,location.replace("/config_save"+e)}}function populate(){document.getElementById("txtSsid").value=document.getElementById("ssid_hidden").value,document.getElementById("txtSmsNumber").value=document.getElementById("phone_hidden").value,document.getElementById("txtCatalogHost").value=document.getElementById("catalogHost_hidden").value,document.getElementById("txtStateHost").value=document.getElementById("stateHost_hidden").value,document.getElementById("txtToEmail").value=document.getElementById("toEmail_hidden").value,document.getElementById("txtFromEmail").value=document.getElementById("fromEmail_hidden").value,document.getElementById("txtEmailPort").value=document.getElementById("emailPort_hidden").value,document.getElementById("txtEmailHost").value=document.getElementById("emailHost_hidden").value,"1"==document.getElementById("maxCheck_hidden").value&&(document.getElementById("chkNotifyMax").checked=!0),"1"==document.getElementById("minCheck_hidden").value&&(document.getElementById("chkNotifyMin").checked=!0),"1"==document.getElementById("sendEmail_hidden").value&&(document.getElementById("chkSendEmail").checked=!0),"1"==document.getElementById("sendSms_hidden").value&&(document.getElementById("chkSendSms").checked=!0),document.getElementById("txtMaxRange").value=document.getElementById("maxRange_hidden").value,document.getElementById("txtMinRange").value=document.getElementById("minRange_hidden").value,document.getElementById("txtDeviceName").value=document.getElementById("deviceName_hidden").value,document.getElementById("txtDeviceInterval").value=document.getElementById("deviceInterval_hidden").value,document.getElementById("txtSaveIntervalMinute").value=document.getElementById("saveIntervalMinute_hidden").value;for(var e,t=document.getElementById("deviceType_hidden").value,d=document.getElementById("ddlDeviceType"),n=0;e=d.options[n];n++)if(e.value==t){d.selectedIndex=n;break}}populate()</script>